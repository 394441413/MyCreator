{"version":3,"sources":["../../../../../assets/scripts/network/assets/scripts/network/pomeloManager.js"],"names":["cc","Class","extends","Component","onLoad","host","port","PomeloManager","start","uuid","Utils","loadUserData","generateUUID","setUserData","connectGate","update","dt","uid","pomelo","init","NETPATH","NETPORT","route","request","data","disconnect","code","onDestroy"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,UAHK,oBAGK;AACN,aAAKC,IAAL,GAAY,EAAZ;AACA,aAAKC,IAAL,GAAY,EAAZ;AACAC,wBAAgB,IAAhB;AACH,KAPI;AASLC,SATK,mBASI;AACL,YAAIC,OAAOC,MAAMC,YAAN,CAAmB,MAAnB,CAAX;AACA,YAAI,CAACF,IAAL,EAAW;AACPA,mBAAOC,MAAME,YAAN,EAAP;AACAF,kBAAMG,WAAN,CAAkB,MAAlB,EAA0BJ,IAA1B;AACH;AACD,aAAKK,WAAL,CAAiBL,IAAjB;AACH,KAhBI;AAkBLM,UAlBK,kBAkBGC,EAlBH,EAkBO,CAAE,CAlBT;AAoBLF,eApBK,uBAoBQG,GApBR,EAoBa;AACdC,eAAOC,IAAP,CAAY;AACRd,kBAAOe,OADC;AAERd,kBAAOe;AAFC,SAAZ,EAGG,YAAY;AACX,gBAAIC,QAAQ,6BAAZ;AACAJ,mBAAOK,OAAP,CAAeD,KAAf,EAAsB;AAClBL,qBAAKA;AADa,aAAtB,EAEG,UAAUO,IAAV,EAAgB;AACfN,uBAAOO,UAAP;AACA,oBAAGD,KAAKE,IAAL,KAAc,GAAjB,EAAsB;AAClB;AACA;AACH;AACDnB,8BAAcF,IAAd,GAAqBmB,KAAKnB,IAA1B;AACAE,8BAAcD,IAAd,GAAqBkB,KAAKlB,IAA1B;AACH,aAVD;AAWH,SAhBD;AAiBH,KAtCI;AAwCLqB,aAxCK,uBAwCQ,CAEZ;AA1CI,CAAT","file":"pomeloManager.js","sourceRoot":"../../../../../assets/scripts/network","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    onLoad () {\n        this.host = \"\";\n        this.port = \"\";\n        PomeloManager = this;\n    },\n\n    start () {\n        var uuid = Utils.loadUserData(\"uuid\");\n        if (!uuid) {\n            uuid = Utils.generateUUID();\n            Utils.setUserData(\"uuid\", uuid);\n        }\n        this.connectGate(uuid);\n    },\n\n    update (dt) {},\n\n    connectGate (uid) {\n        pomelo.init({\n            host : NETPATH,\n            port : NETPORT\n        }, function () {\n            var route = 'gate.gateHandler.queryEntry';\n            pomelo.request(route, {\n                uid: uid\n            }, function (data) {\n                pomelo.disconnect();\n                if(data.code === 500) {\n                    //报错\n                    return ;\n                }\n                PomeloManager.host = data.host;\n                PomeloManager.port = data.port;\n            })\n        });\n    },\n\n    onDestroy () {\n        \n    },\n});\n"]}
{"version":3,"sources":["EventManager.js"],"names":["handlerList","eventList","eventOpen","countNum","cc","Class","extends","Component","properties","onLoad","EventManager","update","dt","i","j","eventName","func","target","msg","eventOff","eventOn","eventOnce","eventTrigger","args","closeEvent","startEvent"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA,IAAIA,cAAc,EAAlB;;AAEA;AACA;AACA;AACA,IAAIC,YAAY,EAAhB;;AAEA,IAAIC,YAAY,IAAhB;AACA,IAAIC,WAAW,CAAf;;AAGAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;;AAQLC,UARK,oBAQI;AACLC,uBAAe,IAAf;AACH,KAVI;;;AAYLC,YAAQ,gBAAUC,EAAV,EAAc;AAClB,YAAIV,SAAJ,EAAe;AACX,iBAAK,IAAIW,IAAI,CAAb,EAAgBA,IAAIV,QAApB,EAA8BU,GAA9B,EAAmC;AAC/B,qBAAK,IAAIC,CAAT,IAAcb,SAAd,EAAyB;AACrB,wBAAIc,YAAYf,YAAYa,CAAZ,EAAe,CAAf,CAAhB;AACA,wBAAIE,aAAaD,CAAjB,EAAoB;AAChB,4BAAIE,OAAOf,UAAUc,SAAV,EAAqB,CAArB,CAAX;AACA,4BAAIE,SAAShB,UAAUc,SAAV,EAAqB,CAArB,CAAb;AACA,4BAAIG,MAAMlB,YAAYa,CAAZ,EAAe,CAAf,CAAV;AACAI,+BAAOD,IAAP,EAAaE,GAAb;AACA,4BAAI,CAACjB,UAAUc,SAAV,EAAqB,CAArB,CAAL,EAA8B;AAC1B,iCAAKI,QAAL,CAAcJ,SAAd;AACH;AACD;AACH;AACJ;AACJ;AACDZ,uBAAW,CAAX;AACAH,0BAAc,EAAd;AACH;AACJ,KAhCI;;AAkCL;AACAoB,aAAS,iBAAUL,SAAV,EAAqBC,IAArB,EAA2BC,MAA3B,EAAmC;AACxChB,kBAAUc,SAAV,IAAuB,CAACC,IAAD,EAAOC,MAAP,EAAe,IAAf,CAAvB;AACH,KArCI;;AAuCL;AACAI,eAAW,mBAAUN,SAAV,EAAqBC,IAArB,EAA2BC,MAA3B,EAAmC;AAC1ChB,kBAAUc,SAAV,IAAuB,CAACC,IAAD,EAAOC,MAAP,EAAe,KAAf,CAAvB;AACH,KA1CI;;AA4CL;AACAE,cAAU,kBAAUJ,SAAV,EAAqB;AAC3B,YAAGd,UAAUc,SAAV,CAAH,EAAwB;AACpB,mBAAQd,UAAUc,SAAV,CAAR;AACH;AACJ,KAjDI;;AAmDLO,kBAAc,sBAAUP,SAAV,EAAqBQ,IAArB,EAA2B;AACrCvB,oBAAYG,QAAZ,IAAwB,CAACY,SAAD,EAAYQ,IAAZ,CAAxB;AACApB;AACH,KAtDI;;AAwDLqB,gBAAY,sBAAY;AACpBtB,oBAAY,KAAZ;AACH,KA1DI;;AA4DLuB,gBAAY,sBAAY;AACpBvB,oBAAY,IAAZ;AACH;AA9DI,CAAT","file":"EventManager.js","sourceRoot":"../../../../../assets/scripts/tools","sourcesContent":["// looper\n// ----------------\n// |eventName|args|\n// ----------------\nvar handlerList = {};\n\n// ----------------------------------\n// |eventName|func|target|bool(once)|\n// ----------------------------------\nvar eventList = {};\n\nvar eventOpen = true;\nvar countNum = 0;\n\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n    },\n\n\n    onLoad() {\n        EventManager = this;\n    },\n\n    update: function (dt) {\n        if (eventOpen) {\n            for (var i = 0; i < countNum; i++) {\n                for (var j in eventList) {\n                    var eventName = handlerList[i][0];\n                    if (eventName == j) {\n                        var func = eventList[eventName][0];\n                        var target = eventList[eventName][1];\n                        var msg = handlerList[i][1];\n                        target[func](msg);\n                        if (!eventList[eventName][2]) {\n                            this.eventOff(eventName);\n                        }\n                        break;\n                    }\n                }\n            }\n            countNum = 0;\n            handlerList = {};\n        }\n    },\n\n    //eventOn(\"event\",\"callbackFunc\",this);\n    eventOn: function (eventName, func, target) {\n        eventList[eventName] = [func, target, true];\n    },\n\n    //eventOnce(\"event\",\"callbackFunc\",this);\n    eventOnce: function (eventName, func, target) {\n        eventList[eventName] = [func, target, false];\n    },\n\n    //eventOff(\"eventName\");\n    eventOff: function (eventName) {\n        if(eventList[eventName]){\n            delete (eventList[eventName]);\n        }\n    },\n\n    eventTrigger: function (eventName, args) {\n        handlerList[countNum] = [eventName, args];\n        countNum++;\n    },\n\n    closeEvent: function () {\n        eventOpen = false;\n    },\n\n    startEvent: function () {\n        eventOpen = true;\n    },\n});\n"]}